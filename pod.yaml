---
 apiVersion: extensions/v1beta1
 kind: Deployment
 metadata:
   name: hogwildnode
 spec:
   replicas: 2
   template:
     metadata:
       labels:
         app: hog
     spec:
       volumes:
         - name: cs449g2-scratch
           persistentVolumeClaim:
             claimName: cs449g2-scratch
       containers:
         - name: h2
           image: gregunz/hogwild
           ports:
             - containerPort: 80
           env:
             - name: MY_NODE_NAME
               valueFrom:
                 fieldRef:
                   fieldPath: spec.nodeName
             - name: MY_POD_NAME
               valueFrom:
                 fieldRef:
                   fieldPath: metadata.name
             - name: MY_POD_NAMESPACE
               valueFrom:
                 fieldRef:
                   fieldPath: metadata.namespace
             - name: MY_POD_IP
               valueFrom:
                 fieldRef:
                   fieldPath: status.podIP
             - name: MY_POD_SERVICE_ACCOUNT
               valueFrom:
                 fieldRef:
                   fieldPath: spec.serviceAccountName
             - name: MODE
               value: "async"
           resources:
             requests:
               memory: "64Mi"
               cpu: "250m"
             limits:
               memory: "128Mi"
               cpu: "500m"
           volumeMounts:
             - mountPath: "/datasets"
               name: cs449g2-scratch
